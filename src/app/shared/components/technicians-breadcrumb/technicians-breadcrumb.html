<!-- Desktop Breadcrumb -->
<div class="technicians-breadcrumb hidden lg:block">
  <div class="breadcrumb-container" [class.has-active-filters]="activeFilters.length > 0">
    <div class="breadcrumb-top-row">
      <div class="breadcrumb-right">
        <span class="breadcrumb-category">دسته بندی</span>
        <div class="breadcrumb-separator"></div>
        <div class="breadcrumb-shapes">
          <img src="assets/images/trilling.svg" alt="">
        </div>
        <span class="breadcrumb-all">همه</span>
      </div>
      <div class="breadcrumb-left">
        <span class="breadcrumb-text">همه دسته بندی ها</span>
        <button type="button" class="breadcrumb-menu-icon" aria-label="Menu">
          <img src="assets/images/Leading.svg" alt="">
        </button>
      </div>
    </div>

    <!-- Active Filters Section (Desktop) -->
    @if (activeFilters.length > 0) {
      <div class="active-filters-section">
        <div class="active-filters-container">
          <div class="active-filters-right">
            <span class="active-filters-label">فیلترهای فعال:</span>
            <div class="active-filters-tags">
              @for (filter of activeFilters; track filter) {
                <div class="active-filter-tag">
                  <span class="filter-tag-text">{{ filter }}</span>
                  <button type="button" class="filter-tag-remove" (click)="onRemoveFilter(filter)" aria-label="Remove filter">
                    <img src="assets/images/multiplay.svg" alt="">
                  </button>
                </div>
              }
            </div>
          </div>

          <button type="button" class="remove-all-filters-btn" (click)="onRemoveAllFilters()">
            حذف همه فیلترها
          </button>
        </div>
      </div>
    }
  </div>
</div>

<!-- Mobile Breadcrumb -->
<div class="technicians-breadcrumb-mobile lg:hidden">
  <div class="breadcrumb-mobile-container" [class.has-active-filters]="activeFilters.length > 0">
    <div class="breadcrumb-mobile-top-row">
      <button type="button" class="breadcrumb-mobile-shapes" aria-label="Categories" (click)="openSidebar()">
        <img src="assets/images/trilling.svg" alt="">
      </button>
      <button type="button" class="breadcrumb-icon" aria-label="Filter" (click)="openFilterSidebar()">
        <img src="assets/images/filter.svg" alt="">
      </button>
      <button type="button" class="breadcrumb-chevron" aria-label="Toggle">
        <img src="assets/images/squre-chart.svg" alt="">
      </button>
      <span class="breadcrumb-mobile-text">نزدیکترین‌ها</span>
      <button type="button" class="breadcrumb-icon" aria-label="Grid view">
        <img src="assets/images/arrow-down.svg" alt="">
      </button>
    </div>

    <!-- Active Filters Section (Mobile) -->
    @if (activeFilters.length > 0) {
      <div class="active-filters-section-mobile">
        <div class="active-filters-container-mobile">
          <div class="active-filters-header-mobile">
            <span class="active-filters-label-mobile">فیلترهای فعال:</span>
            <button type="button" class="remove-all-filters-btn-mobile" (click)="onRemoveAllFilters()">
              حذف فیلترها
            </button>
          </div>
          <div class="active-filters-tags-mobile">
            @for (filter of activeFilters; track filter) {
              <div class="active-filter-tag-mobile">
                <span class="filter-tag-text-mobile">{{ filter }}</span>
                <button type="button" class="filter-tag-remove-mobile" (click)="onRemoveFilter(filter)" aria-label="Remove filter">
                  <img src="assets/images/multiplay.svg" alt="">
                </button>
              </div>
            }
          </div>
        </div>
      </div>
    }
  </div>
</div>

<!-- Mobile Sidebar Overlay -->
<div
  class="sidebar-overlay"
  [class.open]="isSidebarOpen"
  (click)="closeSidebar()">
</div>

<!-- Mobile Sidebar -->
<aside
  class="sidebar-drawer"
  [class.open]="isSidebarOpen">
  <div class="sidebar-header">
    <div class="sidebar-header-title">
      <div class="sidebar-shapes-icon">
        <img src="assets/images/trilling.svg" alt="">
      </div>
      <h2 class="sidebar-title">دسته بندی ها</h2>
    </div>
    <button type="button" class="sidebar-close" aria-label="Close" (click)="closeSidebar()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>

  <div class="sidebar-content">
    <button type="button" class="sidebar-all-button">
      <div class="sidebar-all-shapes">
        <img src="assets/images/trilling.svg" alt="">
      </div>
      <span>همه</span>
    </button>

    <div class="sidebar-filters">
      <div class="sidebar-filter-item">
        <label class="custom-checkbox">
          <input type="checkbox" [(ngModel)]="specialOffers">
          <span class="checkmark"></span>
        </label>
        <div class="sidebar-filter-left">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="sidebar-filter-icon">
            <path d="M10 2L12.5 7.5L18.5 8.5L14 12.5L15 18.5L10 15.5L5 18.5L6 12.5L1.5 8.5L7.5 7.5L10 2Z" fill="currentColor"/>
          </svg>
          <span class="sidebar-filter-text">پیشنهادهای ویژه</span>
        </div>

      </div>

      <div class="sidebar-filter-item">
        <label class="custom-checkbox">
          <input type="checkbox" [(ngModel)]="mostPopular">
          <span class="checkmark"></span>
        </label>
        <div class="sidebar-filter-left">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="sidebar-filter-icon">
            <path d="M10 2C5.58 2 2 5.58 2 10C2 14.42 5.58 18 10 18C14.42 18 18 14.42 18 10C18 5.58 14.42 2 10 2ZM10 16C6.69 16 4 13.31 4 10C4 6.69 6.69 4 10 4C13.31 4 16 6.69 16 10C16 13.31 13.31 16 10 16ZM9 11V13H11V11H9ZM9 7V9H11V7H9Z" fill="currentColor"/>
          </svg>
          <span class="sidebar-filter-text">محبوب ترین ها</span>
        </div>

      </div>

      <div class="sidebar-filter-item">
        <label class="custom-checkbox">
          <input type="checkbox" [(ngModel)]="highestRating">
          <span class="checkmark"></span>
        </label>
        <div class="sidebar-filter-left">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="sidebar-filter-icon">
            <path d="M10 15L4 9L6 7L10 11L14 7L16 9L10 15ZM10 5L16 11L14 13L10 9L6 13L4 11L10 5Z" fill="currentColor"/>
          </svg>
          <span class="sidebar-filter-text">بالاترین امتیاز کاربران</span>
        </div>

      </div>
    </div>

    <div class="sidebar-categories">
      @for (category of categories; track category.name) {
        <button type="button" class="sidebar-category-item">
          <div class="sidebar-category-icon">
            @switch(category.icon) {
              @case('endodontic') {
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              }
              @case('chair') {
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect x="4" y="6" width="16" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M8 6V4C8 2.9 8.9 2 10 2H14C15.1 2 16 2.9 16 4V6" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M6 18H8M16 18H18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
              }
              @default {
                <div class="sidebar-category-icon-placeholder"></div>
              }
            }
          </div>
          <span class="sidebar-category-text">{{ category.name }}</span>
        </button>
      }
    </div>
  </div>
</aside>

<!-- Mobile Filter Sidebar Overlay -->
<div
  class="sidebar-overlay"
  [class.open]="isFilterSidebarOpen"
  (click)="closeFilterSidebar()">
</div>

<!-- Mobile Filter Sidebar -->
<aside
  class="filter-sidebar-drawer"
  [class.open]="isFilterSidebarOpen">
  <div class="filter-sidebar-header">
    <h2 class="filter-sidebar-title">فیلترها</h2>
    <button type="button" class="filter-sidebar-close" aria-label="Close" (click)="closeFilterSidebar()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>

  <div class="filter-sidebar-content">
    <app-technician-filter
      #mobileFilterComponent
      (activeFiltersChange)="activeFilters = $event">
    </app-technician-filter>
  </div>
</aside>

